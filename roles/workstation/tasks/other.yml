- name: remap caps lock key
  commands: "{{ item }}"
  with_items:
    - "mkdir /usr/local/share/kbd/keymaps/"
    - "cp /usr/share/kbd/keymaps/i386/qwerty/us.map.gz /usr/local/share/kbd/keymaps/personal.map.gz"
    - "gunzip -d /usr/local/share/kbd/keymaps/personal.map.gz"
    - "sed -i -e '/58 =/ s/= .*/= Control/' /usr/local/share/kbd/keymaps/personal.map"
  args:
    creates: /usr/local/share/kbd/keymaps/personal.map
  when: ansible_distribution == "Archlinux"

# - name: remap caps lock key Ubuntu
#    XKBOPTIONS="ctrl:nocaps" in /etc/default/keyboard
#    setxkbmap -option ctrl:nocaps
#

# - name: another task (move files)...etc
#   copy:
#     src: files/wallpapers
#     dest: /usr/share/backgrounds/ansible-wallpaper.png
#     owner: root
#     group: root
#

# Ansible user for auto-updating from repo
# - name: add ansible user
#   user:
#     name: system
#     system: yes
#
# - name: set up sudo for ansible user
#   copy:
#     src: files/sudoers_system    # file needs to have "system ALL=(ALL) NOPASSWD: ALL"
#     dest: /etc/sudoers.d/system
#     owner: root
#     group: root
#     mode: 0440
#
# - name: add ansible-pull cron job
#   cron:
#     name: ansible auto-provision
#     user: system
#     minute: "*/10"
#     job: ansible-pull -o -U https://github.com/deviningers/ansible-dot-files.git
